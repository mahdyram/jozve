حتماً! 😎 این یه **چک‌لیست خلاصه و عملی** برای هر محیط جدید است تا فایل‌های پایتونش رو با JupyterLab ویرایش و اجرا کنی:

---

## **چک‌لیست استفاده از JupyterLab با محیط جدید Conda**

### ۱️- محیط جدید بساز

مثلاً با Python 3.11:

```bash
conda create -n myenv-2 python=3.11
conda activate myenv-2
```

---

### ۲️- نصب پکیج‌ها در محیط پروژه

هر پکیجی که پروژه نیاز داره، نصب کن:

```bash
conda install numpy pandas matplotlib   # یا pip install ...
```

---

### ۳️- اضافه کردن کرنل محیط به Jupyter

- اگر JupyterLab فقط در **base** نصب است، باید کرنل محیط جدید را اضافه کنی تا تو Jupyter قابل انتخاب باشد:

```bash
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

---

### ۴️- اجرای JupyterLab

- محیط base یا هر محیط دیگه که JupyterLab روش نصب شده را فعال کن:

```bash
conda activate base
jupyter lab
```

---

### ۵️- انتخاب کرنل داخل JupyterLab

- وقتی فایل `.py` یا `.ipynb` رو باز کردی، از منوی **Kernel → Change Kernel → Python (myenv-2)** انتخاب کن.
- حالا همه کدها در محیط جدید اجرا می‌شوند و از پکیج‌ها و نسخه پایتون آن محیط استفاده می‌کنند.

---

💡 **نکات مهم**

1. نیازی نیست JupyterLab را در هر محیط نصب کنی، نصب در base کافی است.
2. کرنل هر محیط فقط یکبار اضافه می‌شود و بعد می‌توانی همیشه انتخابش کنی.
3. برای فایل‌های `.py` هم می‌توانی در JupyterLab باز و ویرایش کنی، نه فقط نوت‌بوک `.ipynb`.

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

حتماً! بیاییم این دستور را **کلمه به کلمه** تحلیل کنیم تا کامل روشن شود:

---

```bash
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

---

### ۱️- `python`

- اشاره به **تفسیرگر پایتون** دارد که فعال است.
- در این حالت، وقتی محیط `myenv-2` فعال باشد، این `python` همان **نسخه پایتون محیط `myenv-2`** است.

---

### ۲️- `-m ipykernel`

- یعنی ما **ماژول `ipykernel` را اجرا می‌کنیم**.
- `ipykernel` مسئول ساخت **کرنل برای Jupyter** است تا Jupyter بتواند کد پایتون را در محیط خاص اجرا کند.

---

### ۳️- `install`

- این **زیر دستور `ipykernel`** است.
- به ماژول می‌گوید: «یک کرنل جدید نصب کن.»

---

### ۴️- `--user`

- کرنل را فقط **برای کاربر فعلی** نصب می‌کند.
- نیازی به دسترسی root یا sudo نیست.
- کرنل در مسیر کاربر ذخیره می‌شود، نه در کل سیستم.

---

### ۵️- `--name myenv-2`

- نام **داخلی کرنل** است که Jupyter برای شناسایی محیط استفاده می‌کند.
- مثال: وقتی JupyterLab باز می‌شود، سیستم می‌فهمد این کرنل مربوط به محیط `myenv-2` است.

---

### ۶️- `--display-name "Python (myenv-2)"`

- نام **نمایشی در JupyterLab** است.
- وقتی کرنل را انتخاب می‌کنی، این همان نامی است که تو منو ظاهر می‌شود.
- کاربر راحت بفهمد این کرنل مربوط به کدام محیط است.

---

### ✅ جمع‌بندی کوتاه

- این دستور **ارتباط بین محیط Conda و JupyterLab را برقرار می‌کند**.
- بدون این دستور، JupyterLab نمی‌تواند محیط جدید را به عنوان کرنل انتخاب کند.
- بعد از اجرای دستور، می‌توانی در JupyterLab فایل‌های `.py` و `.ipynb` را با همان محیط اجرا کنی.

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

آها، می‌خوای دقیق بدونی که اون بخش `install` تو دستور

```bash
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

چی کار می‌کنه و **کجا نصب می‌کنه**. 😎

---

### ۱️- چه چیزی نصب می‌کنه؟

- `install` در این دستور **یک کرنل Jupyter جدید می‌سازد**.
- **کرنل = اطلاعات محیط پایتون + مسیر پایتون** که Jupyter از آن برای اجرای کدها استفاده می‌کند.

یعنی در واقع هیچ پکیجی نصب نمی‌شود، بلکه **Jupyter یک پروفایل کرنل برای این محیط ایجاد می‌کند**.

---

### ۲️- کجا نصب می‌کند؟

- چون گزینه `--user` داریم، کرنل در **مسیر کاربری تو لینوکس** نصب می‌شود، معمولاً چیزی مثل:

```
~/.local/share/jupyter/kernels/myenv-2/
```

- این مسیر شامل یک فایل `kernel.json` است که مسیر پایتون محیط `myenv-2` را به Jupyter معرفی می‌کند.

---

### ۳️- ربطش با محیط‌ها و Jupyter

- **محیط myenv-2:** کرنل به این محیط اشاره می‌کند و وقتی انتخابش کنی، کدها دقیقا با پکیج‌ها و نسخه پایتون همان محیط اجرا می‌شوند.
- **JupyterLab:** فقط کرنل را شناسایی می‌کند، خودش را نصب نمی‌کند و هیچ تغییر مستقیمی روی base یا myenv-2 ندارد.
- **Base یا سیستم لینوکس:** نصب کرنل روی سیستم یا base نیست، فقط فایل‌های کرنل در مسیر کاربر ذخیره می‌شوند.

---

### 💡 جمع‌بندی ساده

| بخش              | کارکرد                                                                 |
| ---------------- | ---------------------------------------------------------------------- |
| `install`        | یک کرنل جدید برای Jupyter ایجاد می‌کند                                 |
| `--user`         | کرنل را در مسیر کاربر (`~/.local/share/jupyter/kernels/`) ذخیره می‌کند |
| `--name`         | نام داخلی کرنل در Jupyter                                              |
| `--display-name` | نام نمایشی کرنل در JupyterLab                                          |

- هیچ پکیجی روی **base یا myenv-2 نصب نمی‌شود**، فقط **Jupyter یک لینک به محیط ایجاد می‌کند**.

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

وقتی دستور

```bash
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

را اجرا می‌کنید، **مهم این است که محیطی که می‌خوای کرنل برای آن ساخته شود فعال باشد**.

---

### توضیح دقیق:

1. اگر **myenv-2 فعال باشد**:

```bash
conda activate myenv-2
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

- کرنل به مسیر پایتون **همان محیط myenv-2** اشاره می‌کند.
- JupyterLab می‌تواند کرنل را انتخاب کند و کد در همان محیط اجرا شود. ✅

2. اگر **base فعال باشد**:

```bash
conda activate base
python -m ipykernel install --user --name myenv-2 --display-name "Python (myenv-2)"
```

- در این حالت، **پایتون base** به کرنل متصل می‌شود، نه پایتون myenv-2. ❌
- پس وقتی در JupyterLab کرنل `"Python (myenv-2)"` را انتخاب کنی، در واقع **کدها با پایتون base اجرا می‌شوند، نه محیط مورد نظر**.

---

### 💡 جمع‌بندی ساده:

- **همیشه قبل از اجرای دستور، محیطی که می‌خوای کرنل براش ساخته شود فعال باشه.**
- فقط آن موقع کرنل به مسیر صحیح پایتون آن محیط اشاره می‌کند.

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

حتماً! 😎 این یه **چک‌لیست عملی و گام‌به‌گام** برای اینکه **یک JupyterLab در base داشته باشی و همه محیط‌های Conda را با آن اجرا کنی**:

---

## **چک‌لیست گام‌به‌گام**

### ۱️- نصب JupyterLab در base

```bash
conda activate base
conda install jupyterlab notebook ipykernel
```

- `notebook` برای پشتیبانی سلول‌ها و اجرای کد
- `ipykernel` برای اتصال کرنل محیط‌ها

---

### ۲️- ساخت محیط جدید برای پروژه

مثلاً با Python 3.11:

```bash
conda create -n myenv-1 python=3.11
conda activate myenv-1
```

---

### ۳️- نصب پکیج‌های پروژه در محیط جدید

```bash
conda install numpy pandas matplotlib
# یا pip install <package>
```

---

### ۴️- نصب ipykernel در محیط پروژه

- اگر ipykernel نصب نیست:

```bash
conda install ipykernel
# یا
pip install ipykernel
```

---

### ۵️- اضافه کردن کرنل محیط پروژه به Jupyter

```bash
python -m ipykernel install --user --name myenv-1 --display-name "Python (myenv-1)"
```

- `--name` = نام داخلی کرنل
- `--display-name` = نام نمایشی در JupyterLab

> بعد از این مرحله، محیط `myenv-1` به عنوان کرنل در JupyterLab شناخته می‌شود.

---

### ۶️- اجرای JupyterLab از base

```bash
conda activate base
jupyter lab
```

- مرورگر باز می‌شود.
- مسیر پروژه را پیدا کن و فایل‌های `.py` یا `.ipynb` را باز کن.

---

### ۷️- انتخاب کرنل محیط پروژه

- در JupyterLab منوی **Kernel → Change Kernel → Python (myenv-1)**
- حالا همه کدها در همان محیط اجرا می‌شوند.

---

### ۸️- نکات مهم

1. JupyterLab **فقط یکبار در base نصب می‌شود** و دیگر محیط‌ها نیاز به نصب جداگانه ندارند.
2. هر محیط پروژه **باید ipykernel داشته باشد** تا کرنل اضافه شود.
3. برای هر محیط جدید، فقط مراحل ۲ تا ۵ کافی است.

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

نه، حذف پروژه **کرنل Jupyter را حذف نمی‌کند**. 😎

---

### چرا؟

- وقتی کرنل اضافه می‌شود، **Jupyter فقط یک لینک به محیط پایتون** و مسیر آن محیط ایجاد می‌کند:

```
~/.local/share/jupyter/kernels/myenv-1/
```

- فایل‌ها و پروژه‌های `.py` یا `.ipynb` فقط از این کرنل استفاده می‌کنند، اما کرنل مستقل است.

---

### سناریوها:

1. **حذف فایل‌ها یا پروژه**

   - فقط فایل‌های پروژه حذف می‌شوند.
   - کرنل `"Python (myenv-1)"` هنوز در JupyterLab قابل انتخاب است، ولی اگر محیط واقعی (`myenv-1`) هم پاک شود، کرنل دیگر کار نمی‌کند.

2. **حذف محیط Conda**

```bash
conda remove -n myenv-1 --all
```

- محیط اصلی پاک می‌شود.
- کرنل هنوز در JupyterLab لیست است، اما وقتی انتخابش کنی، خطا می‌دهد چون مسیر پایتون دیگر وجود ندارد.
- در این صورت می‌توان کرنل را هم حذف کرد:

```bash
jupyter kernelspec uninstall myenv-1
```

---

### 💡 جمع‌بندی

- **حذف پروژه → کرنل باقی می‌ماند**
- **حذف محیط → کرنل باید دستی حذف شود یا خطا می‌دهد**

<!-- -------------------------------------------- -->
<hr style="height:5px; background-color:red" />
<!-- -------------------------------------------- -->

برای دیدن لیست کرنل‌های نصب‌شده در Jupyter، می‌تونی از دستور زیر استفاده کنی:

```bash
jupyter kernelspec list
```

خروجی چیزی شبیه این خواهد بود:

```
Available kernels:
  python3        /home/mahdyram/.local/share/jupyter/kernels/python3
  myenv-1        /home/mahdyram/.local/share/jupyter/kernels/myenv-1
  myenv-2        /home/mahdyram/.local/share/jupyter/kernels/myenv-2
```

توی این خروجی:

- سمت چپ اسم کرنل است که در JupyterLab نمایش داده می‌شود.
- سمت راست مسیر واقعی کرنل است.

اگه خواستی یک کرنل خاص رو حذف کنی، مثلاً `myenv-1`، دستور زیر رو اجرا می‌کنی:

```bash
jupyter kernelspec uninstall myenv-1
```

بعد از این، کرنل از لیست JupyterLab حذف می‌شود و دیگه خطا نمی‌دهد حتی اگر محیط Conda پاک شده باشد.

اگر بخوای، می‌تونم یک **چک‌لیست ساده برای مدیریت پروژه‌ها، محیط‌ها و کرنل‌ها در Jupyter** هم برات آماده کنم تا همیشه بدون دردسر بدونی چه چیزی رو پاک می‌کنی. میخوای بسازم؟
